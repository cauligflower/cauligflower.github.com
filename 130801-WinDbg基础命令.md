Windows内核学习之WinDbg基础命令
=====

**Author：[cauligflower](http://cauligflower.github.com)**

**Time：2013.08.01**

**Title：WinDbg基础命令**

-----


**1.sympath 命令**

设置或查看本地符号目录和服务器符号目录

```
.sympath SRV*<DownstreamStore>*http://msdl.microsoft.com/download/symbols
```

![](http://y.photo.qq.com/img?s=VgpBINHHs&l=y.jpg)

PS：此处已经通过快捷方式后的目标参数设置了针对不同系统的符号路径，所以无需再次设置。




**2.reload 命令**

重新加载符号

通过```.reload /f ```对所有模块符号重新加载

![](http://y.photo.qq.com/img?s=Q5KGDQ5H8&l=y.jpg)

通过```.reload /i```对所有未加载符号模块重新加载

![](http://y.photo.qq.com/img?s=MD8x6vhPn&l=y.jpg)




**3.cls 命令**

使用```.cls```命令清屏




**4.u 命令**

反汇编某个地址，后面可以跟函数名或地址

![](http://y.photo.qq.com/img?s=lxojpiueq&l=y.jpg)

![](http://y.photo.qq.com/img?s=tuzdd7WXr&l=y.jpg)




**5.db/dw/dd/dq/dD/df 命令**

针对数据，进行不同字节的解析

db 显示一字节的长度，BYTE

dw 显示两字节的长度，WORD

dd 显示四字节的长度，DWORD

dq 显示八字节的长度

dD 显示double实数（8字节的长度）

df 显示float实数（4字节的长度）




**6.da/du/ds/dS 命令**

针对字符串，进行不同字符编码的解析

da 显示asscii值

du 显示unicode值

ds 显示ANSI_STRING值

dS显示UNICODE_STRING的值




**7.eb/ew/ed/eq 命令**

eb address value 在address这个地址写入一字节value 

ew address value 在address这个地址写入两字节value

ed address value 在address这个地址写入四字节value

eq address value 在address这个地址写入八字节value




**8.dt 命令**

查看相关结构体

![](http://y.photo.qq.com/img?s=zt6Iqu3LC&l=y.jpg)

![](http://y.photo.qq.com/img?s=9Ayy3ryEn&l=y.jpg)




**9.lm 命令**

```
lm           //列出模块

lm vm 模块名  //查看模块详细信息
```




**10.!process 命令**

```
!process 0 0         //列出系统进程信息

!process 0 0 进程名  //列出该进程的信息

!process 0 1 进程名  //列出该进程更详细的信息

!process 0 7 进程名  //列出该进程的最详细信息，包括线程的

.process EPROCESS    //进入进程内存，是.process而不是!process
```




**11.!object 命令**

根据地址所在位置，列出对象信息

```
!object 地址         //显示该地址的对象信息
```

![](http://y.photo.qq.com/img?s=vEgpvf2uP&l=y.jpg)




**12.bp/ba 命令**

bp命令，向指定地址插入int 3指令。

ba命令，通过设置CPU的dx寄存器拦截线程。




**13.x 命令**

模糊查询，可以使用通配符

```
x nt!kes*des*table*
```

![](http://y.photo.qq.com/img?s=cooyzc2WE&l=y.jpg)




**14.dds 命令**

```
dds 地址  //此命令用来解析某连续地址的函数名
```

![](http://y.photo.qq.com/img?s=b8Snf2xM4&l=y.jpg)





Windbg还有很多非常有用的命令，需要在平时学习中多加练习熟悉命令的使用。

可以从上述常用命令中看到有些命令为直接输入，有些需要加.，有些需要加!。其实他们分别对应的标注命令，元命令和拓展命令。


-----

参考链接：

WinDbg自带文档《kernel_debugging_tutorial.doc》：[URL](http://www.easefilter.com/info/kernel_debugging_tutorial.doc)

WinDbg Online Help：[URL](http://www.dbgtech.net/windbghelp/index.html)

Kernel Debugging with WinDbg（中翻译）：[URL](http://bbs.pediy.com/showthread.php?t=36186)
